
<script>
    // 全局的JS异常捕捉方法, 捕捉后发送到服务器
    window.onerror = function (msg, file, line, column, error) {
        try {
            var img = document.createElement('img');
            var st = (new Date).getTime(), info = location.host + '-' + file + '-' + line + '-' + msg;
            img.src = 'http://api.9888.cn/bridge/api/1/session_user.json?msg=' + info + '&st=' + parseInt(st / 1000);
            img.width = '0';
            img.height = '0';
            img.style.display = 'none';
            img.id = 'err-' + st;
            setTimeout(function () {
                document.body.removeChild(document.getElementById('err-' + st))
            }, 3000);
            document.body.appendChild(img);
        } catch (e) {
            console.log('can not report js error', e)
        }
    }
</script>