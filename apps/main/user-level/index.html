<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>金融工场-会员等级</title>
    <meta name="viewport" content="width=device-width, initial-scale=0.5, user-scalable=no"/>
    <meta name="screen-orientation" content="portrait">
    <meta name="x5-orientation" content="portrait">
    <meta name="format-detection" content="telephone=no"/>
    <meta name="format-detection" content="email=no"/>
    <script src="javascripts/jquery-2.1.4.min.js"></script>
    <!--<link rel="stylesheet" href="stylesheets/base.css"/>-->
    <link rel="stylesheet" href="stylesheets/slick.css"/>
    <link rel="stylesheet" href="stylesheets/slick-theme.css"/>
    <link rel="stylesheet" href="stylesheets/index.css"/>
</head>
<body id="level">
<div id="header" class="clearfix">
    <a href="#" class="back">返回</a>会员等级
</div>
<a class="level-notice" href=""><span>距一下等级还差A贡献值，加油呀~<i></i></span></a>
<div class="slider-block" style="display: none">
    <section class="center slider">
        <div>
            <div class="img-box" data-tab="0">
                <img id="vip0" src="images/banner-vip0.jpg"/>
                <div id="vip0-jindutiao" class="level-progress-box level-progress-box0"><!-- 变灰色的时候加gray-class-->
                    <div class="level-progress">
                        <div class="level-progress-bar"></div>
                        <div class="level-progress-red">
                            <div class="level-progress-ico"></div>
                        </div>
                        <div class="level-progress-line1 level-progress-line"></div>
                        <div class="level-progress-line2 level-progress-line"></div>
                        <div class="level-progress-line3 level-progress-line"></div>
                        <div class="level-progress-line4 level-progress-line"></div>
                    </div>
                    <div class="level-progress-text">贡献值：<span>10000</span></div>
                </div>
            </div>
        </div>
        <div>
            <div class="img-box" data-tab="1">
                <img id="vip1" src="images/banner-vip1.jpg"/>
                <div id="vip1-jindutiao" class="level-progress-box level-progress-box1"><!-- 变灰色的时候加gray-class-->
                    <div class="level-progress">
                        <div class="level-progress-bar"></div>
                        <div class="level-progress-red">
                            <div class="level-progress-ico"></div>
                        </div>
                        <div class="level-progress-line1 level-progress-line"></div>
                        <div class="level-progress-line2 level-progress-line"></div>
                        <div class="level-progress-line3 level-progress-line"></div>
                        <div class="level-progress-line4 level-progress-line"></div>
                    </div>
                    <div class="level-progress-text">贡献值：<span>10000</span></div>
                </div>
            </div>
        </div>
        <div>
            <div class="img-box" data-tab="2">
                <img id="vip2" src="images/banner-vip2.jpg"/>
                <div id="vip2-jindutiao" class="level-progress-box level-progress-box2"><!-- 变灰色的时候加gray-class-->
                    <div class="level-progress">
                        <div class="level-progress-bar"></div>
                        <div class="level-progress-red">
                            <div class="level-progress-ico"></div>
                        </div>
                        <div class="level-progress-line1 level-progress-line"></div>
                        <div class="level-progress-line2 level-progress-line"></div>
                        <div class="level-progress-line3 level-progress-line"></div>
                        <div class="level-progress-line4 level-progress-line"></div>
                    </div>
                    <div class="level-progress-text">贡献值：<span>10000</span></div>
                </div>
            </div>
        </div>
        <div>
            <div class="img-box" data-tab="3">
                <img id="vip3" src="images/banner-vip3.jpg"/>
                <div id="vip3-jindutiao" class="level-progress-box level-progress-box3"><!-- 变灰色的时候加gray-class-->
                    <div class="level-progress">
                        <div class="level-progress-bar"></div>
                        <div class="level-progress-red">
                            <div class="level-progress-ico"></div>
                        </div>
                        <div class="level-progress-line1 level-progress-line"></div>
                        <div class="level-progress-line2 level-progress-line"></div>
                        <div class="level-progress-line3 level-progress-line"></div>
                        <div class="level-progress-line4 level-progress-line"></div>
                    </div>
                    <div class="level-progress-text">贡献值：<span>10000</span></div>
                </div>
            </div>
        </div>
        <div>
            <div class="img-box" data-tab="4">
                <img id="vip4" src="images/banner-vip4.jpg"/>
                <div id="vip4-jindutiao" class="level-progress-box level-progress-box4"><!-- 变灰色的时候加gray-class-->
                    <div class="level-progress">
                        <div class="level-progress-bar"></div>
                        <div class="level-progress-red">
                            <div class="level-progress-ico"></div>
                            <div class="level-progress-ico1"></div>
                        </div>
                        <div class="level-progress-line1 level-progress-line"></div>
                        <div class="level-progress-line2 level-progress-line"></div>
                        <div class="level-progress-line3 level-progress-line"></div>
                        <div class="level-progress-line4 level-progress-line"></div>
                    </div>
                    <div class="level-progress-text">贡献值：<span>10000</span></div>
                </div>
            </div>
        </div>
    </section>
</div>
<div id="about_swiper_txt" class="about_swiper_txt">
    <div class="slide-txt show">
        <div class="level-img level-img0 clearfix">

        </div>
    </div>
    <div class="slide-txt">
        <div class="level-img level-img1 clearfix">

        </div>
    </div>
    <div class="slide-txt">
        <div class="level-img level-img2 clearfix">

        </div>
    </div>
    <div class="slide-txt">
        <div class="level-img level-img3 clearfix">

        </div>
    </div>
    <div class="slide-txt">
        <div class="level-img level-img4 clearfix">

        </div>
    </div>
</div>
<div class="leave-btn"><a href="#" class="btn-red">查看升级攻略</a></div>

<script src="javascripts/slick.js"></script>
<script>
    var imageList = [
        [
            'images/level-1-1.png',
            'images/level-1-2.png',
            'images/level-1-3.png'
        ],
        [
            'images/level-2-1.png',
            'images/level-2-3.png',
            'images/level-2-3.png'
        ],
        [
            'images/level-3-1.png',
            'images/level-3-3.png',
            'images/level-3-3.png'
        ],
        [
            'images/level-4-1.png',
            'images/level-4-2.png',
            'images/level-4-3.png'
        ],
        [
            'images/level-5-1.png',
            'images/level-5-2.png'
        ]
    ];
    $(document).on('ready', function () {

        $.ajax({
            type: "GET",
            url: "http://localhost/level.json",
            dataType: "json",
            success: function (data) {
console.log(data)

                $(".slider-block").css('display', 'block');

                var num = data.data.userLevel - 1;
                var value = data.data.contributePercent;
                var contribute = data.data.contributeTotal;
                $(".level-progress-text").find("span").text(contribute);

                imageList[0].forEach(function (i) {
                    $(".level-img0").append('<img src="' + i + '" />');
                });
                imageList[1].forEach(function (i) {
                    $(".level-img1").append('<img src="' + i + '" />');
                });
                imageList[2].forEach(function (i) {
                    $(".level-img2").append('<img src="' + i + '" />');
                });
                imageList[3].forEach(function (i) {
                    $(".level-img3").append('<img src="' + i + '" />');
                });
                imageList[4].forEach(function (i) {
                    $(".level-img4").append('<img src="' + i + '" />');
                });

                if (num == 0) {
                    $("#vip0").removeClass("change-img-gray");
                    $("#vip1").attr("class", "change-img-gray");
                    $("#vip2").attr("class", "change-img-gray");
                    $("#vip3").attr("class", "change-img-gray");
                    $("#vip4").attr("class", "change-img-gray");
                    $("#vip0-jindutiao").removeClass("gray-class");
                    $("#vip1-jindutiao").addClass("gray-class");
                    $("#vip2-jindutiao").addClass("gray-class");
                    $("#vip3-jindutiao").addClass("gray-class");
                    $("#vip4-jindutiao").addClass("gray-class");
                    $(".level-img").not(".level-img0").find("img").addClass("change-img-gray");
                } else if (num == 1) {
                    $("#vip0").attr("class", "change-img-gray");
                    $("#vip1").removeClass("change-img-gray");
                    $("#vip2").attr("class", "change-img-gray");
                    $("#vip3").attr("class", "change-img-gray");
                    $("#vip4").attr("class", "change-img-gray");
                    $("#vip0-jindutiao").addClass("gray-class");
                    $("#vip1-jindutiao").removeClass("gray-class");
                    $("#vip2-jindutiao").addClass("gray-class");
                    $("#vip3-jindutiao").addClass("gray-class");
                    $("#vip4-jindutiao").addClass("gray-class");
                    $(".level-img").not(".level-img1").find("img").addClass("change-img-gray");
                } else if (num == 2) {
                    $("#vip0").attr("class", "change-img-gray");
                    $("#vip1").attr("class", "change-img-gray");
                    $("#vip2").removeClass("change-img-gray");
                    $("#vip3").attr("class", "change-img-gray");
                    $("#vip4").attr("class", "change-img-gray");
                    $("#vip0-jindutiao").addClass("gray-class");
                    $("#vip1-jindutiao").addClass("gray-class");
                    $("#vip2-jindutiao").removeClass("gray-class");
                    $("#vip3-jindutiao").addClass("gray-class");
                    $("#vip4-jindutiao").addClass("gray-class");
                    $(".level-img").not(".level-img2").find("img").addClass("change-img-gray");
                } else if (num == 3) {
                    $("#vip0").attr("class", "change-img-gray");
                    $("#vip1").attr("class", "change-img-gray");
                    $("#vip2").attr("class", "change-img-gray");
                    $("#vip3").removeClass("change-img-gray");
                    $("#vip4").attr("class", "change-img-gray");
                    $("#vip0-jindutiao").addClass("gray-class");
                    $("#vip1-jindutiao").addClass("gray-class");
                    $("#vip2-jindutiao").addClass("gray-class");
                    $("#vip3-jindutiao").removeClass("gray-class");
                    $("#vip4-jindutiao").addClass("gray-class");
                    $(".level-img").not(".level-img3").find("img").addClass("change-img-gray");
                } else if (num == 4) {
                    $("#vip0").attr("class", "change-img-gray");
                    $("#vip1").attr("class", "change-img-gray");
                    $("#vip2").attr("class", "change-img-gray");
                    $("#vip3").attr("class", "change-img-gray");
                    $("#vip4").removeClass("change-img-gray");
                    $("#vip0-jindutiao").addClass("gray-class");
                    $("#vip1-jindutiao").addClass("gray-class");
                    $("#vip2-jindutiao").addClass("gray-class");
                    $("#vip3-jindutiao").addClass("gray-class");
                    $("#vip4-jindutiao").removeClass("gray-class");
                    $(".level-img").not(".level-img4").find("img").addClass("change-img-gray");
                }
                var txt = $("#about_swiper_txt .slide-txt");
                $(".center").slick({
                    dots: true,
                    infinite: true,
                    centerMode: true,
                    slidesToShow: 1,
                    slidesToScroll: 1,
                    arrows: false,
                    initialSlide: num
                });

                txt.hide().eq(num).show().addClass("show");

                $(".center").on("afterChange", function () {
                    var t = $(".slider .slick-active .img-box").attr("data-tab");
                    txt.removeClass("show").hide();
                    txt.eq(t).show();
                    setTimeout(function () {
                        txt.eq(t).addClass("show")
                    }, 10)
                });

                var barNum0 = (num + 1) * 20;
                var redNum0 = value;
                $(".level-progress-box0 .level-progress-bar").css("width", barNum0 + "%");
                $(".level-progress-box1 .level-progress-bar").css("width", barNum0 + "%");
                $(".level-progress-box2 .level-progress-bar").css("width", barNum0 + "%");
                $(".level-progress-box3 .level-progress-bar").css("width", barNum0 + "%");
                $(".level-progress-box4 .level-progress-bar").css("width", barNum0 + "%");
                $(".level-progress-box0 .level-progress-red").css("width", redNum0 + "%");
                $(".level-progress-box1 .level-progress-red").css("width", redNum0 + "%");
                $(".level-progress-box2 .level-progress-red").css("width", redNum0 + "%");
                $(".level-progress-box3 .level-progress-red").css("width", redNum0 + "%");
                $(".level-progress-box4 .level-progress-red").css("width", redNum0 + "%");
            }
        });
    });
</script>
</body>
</html>